(function(){"use strict";var e={1845:function(e,t,n){var r=n(9242),o=n(3396);const i={class:"align-center mt-6 mx-6"},l={key:1,class:"mt-6"};function a(e,t,n,r,a,s){const c=(0,o.up)("AppBar"),u=(0,o.up)("AirportSearchController"),p=(0,o.up)("NumberOfDaysController"),h=(0,o.up)("v-btn"),d=(0,o.up)("v-card"),m=(0,o.up)("RequestProgress"),f=(0,o.up)("SearchResults"),v=(0,o.up)("v-main"),g=(0,o.up)("v-layout");return a.airports&&a.preferences?((0,o.wg)(),(0,o.j4)(g,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{initialIsDark:this.preferences.darkTheme},null,8,["initialIsDark"]),(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(d,{class:"pa-4",elevation:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{airports:a.airports,label:"Origin",type:"origin",initialValue:this.preferences.origin},null,8,["airports","initialValue"]),(0,o.Wm)(u,{airports:a.airports,label:"Destination",type:"destination",initialValue:this.preferences.destination},null,8,["airports","initialValue"]),(0,o.Wm)(p,{value:this.preferences.numberOfDays},null,8,["value"]),(0,o.Wm)(h,{onClick:s.onSearch,class:"mt-4",color:"primary"},{default:(0,o.w5)((()=>[(0,o.Uk)("Search")])),_:1},8,["onClick"])])),_:1}),a.searchInProgress?((0,o.wg)(),(0,o.j4)(d,{key:0,class:"pa-4 my-6",elevation:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{onComplete:s.onSearchComplete},null,8,["onComplete"])])),_:1})):(0,o.kq)("",!0),a.searchInProgress||"[]"===JSON.stringify(a.searchResults)?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(f,{results:a.searchResults},null,8,["results"])]))])])),_:1})])),_:1})):(0,o.kq)("",!0)}function s(e){return e}function c(e,t,n,r,i,l){const a=(0,o.up)("v-app-bar-title"),s=(0,o.up)("IconButton"),c=(0,o.up)("v-app-bar");return(0,o.wg)(),(0,o.j4)(c,{color:"primary",elevation:"4"},{append:(0,o.w5)((()=>[(0,o.Wm)(s,{onClick:l.onClickTheme,tooltip:"Toggle dark theme",icon:i.themeIcon},null,8,["onClick","icon"]),(0,o.Wm)(s,{onClick:l.onClickMusic,tooltip:"Toggle music",icon:i.musicIcon},null,8,["onClick","icon"])])),default:(0,o.w5)((()=>[(0,o.Wm)(a,{class:"font-weight-bold"},{default:(0,o.w5)((()=>[(0,o.Uk)("Low fares, even lower")])),_:1})])),_:1})}var u=n(7041);function p(e,t,n,r,i,l){const a=(0,o.up)("v-btn"),s=(0,o.up)("v-tooltip");return(0,o.wg)(),(0,o.j4)(s,{text:n.tooltip,location:"bottom"},{activator:(0,o.w5)((({props:e})=>[(0,o.Wm)(a,(0,o.dG)({onClick:l.clicked,class:"mr-2"},e,{variant:"text",icon:n.icon}),null,16,["onClick","icon"])])),_:1},8,["text"])}var h={name:"IconButton",props:["tooltip","icon"],emits:["click"],methods:{clicked(){this.$emit("click")}}},d=n(89);const m=(0,d.Z)(h,[["render",p]]);var f=m,v={name:"AppBar",components:{IconButton:f},props:["initialIsDark"],data(){return{theme:void 0,themeIcon:this.initialIsDark?"mdi-moon-waning-crescent":"mdi-white-balance-sunny",musicIcon:"mdi-music-note-off",audio:this.initialIsDark?new Audio("evening.mp3"):new Audio("afternoon.mp3"),audioPaused:!0}},methods:{onClickTheme(){this.audio.pause(),this.theme.global.current.dark?(this.setLightTheme(),this.setDarkThemePreference(!1)):(this.setDarkTheme(),this.setDarkThemePreference(!0)),this.audioPaused||this.audio.play()},setLightTheme(){this.theme.global.name="light",this.audio=new Audio("afternoon.mp3"),this.themeIcon="mdi-white-balance-sunny"},setDarkTheme(){this.theme.global.name="dark",this.audio=new Audio("evening.mp3"),this.themeIcon="mdi-moon-waning-crescent"},setDarkThemePreference(e){fetch(s("/setPreferences"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferenceType:"darkTheme",preferenceValue:e})})},onClickMusic(){this.audioPaused?(this.musicIcon="mdi-music-note",this.audioPaused=!1,this.audio.play()):(this.musicIcon="mdi-music-note-off",this.audioPaused=!0,this.audio.pause())}},created(){this.theme=(0,u.Fg)()},mounted(){this.initialIsDark&&this.setDarkTheme()}};const g=(0,d.Z)(v,[["render",c]]);var w=g;const y={class:"my-1"};function b(e,t,n,r,i,l){const a=(0,o.up)("AirportSearchField"),s=(0,o.up)("IconButton");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(a,{airports:n.airports,label:n.label,onModelUpdate:l.onFieldUpdate,value:i.value},null,8,["airports","label","onModelUpdate","value"]),(0,o._)("div",y,[(0,o.Wm)(s,{onClick:l.onMagic,tooltip:"Fill this field with all possible options",icon:"mdi-creation"},null,8,["onClick"]),(0,o.Wm)(s,{onClick:l.onClear,tooltip:"Clear all airports from field",icon:"mdi-delete"},null,8,["onClick"])])],64)}var k=n(7139);const _={class:"ml-1"};function S(e,t,n,r,i,l){const a=(0,o.up)("v-chip"),s=(0,o.up)("v-autocomplete");return(0,o.wg)(),(0,o.j4)(s,{items:n.airports,"item-title":"name","item-value":"code","hide-details":"",chips:"","closable-chips":"",multiple:"",label:n.label,modelValue:i.localValue,"onUpdate:modelValue":t[0]||(t[0]=e=>i.localValue=e)},{chip:(0,o.w5)((({props:e,item:t})=>[(0,o.Wm)(a,(0,o.dG)(e,{closable:"",pill:"",color:t.raw.color}),{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,k.zw)(t.raw.code),1),(0,o._)("span",_,(0,k.zw)(t.raw.name),1)])),_:2},1040,["color"])])),_:1},8,["items","label","modelValue"])}var C={name:"AirportSearchField",props:["airports","label","value"],emits:["model-update"],data(){return{localValue:this.value}},watch:{localValue(e,t){JSON.stringify(e)!==JSON.stringify(t)&&this.$emit("model-update",e)},value(e){this.localValue=e}}};const O=(0,d.Z)(C,[["render",S]]);var P=O,I={name:"AirportSearchController",props:["airports","type","label","initialValue"],components:{AirportSearchField:P,IconButton:f},data(){return{value:this.initialValue}},methods:{onFieldUpdate(e){fetch(s("/setPreferences"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferenceType:this.type,preferenceValue:e})}).then((e=>e.json())).then((e=>this.value=e))},onMagic(){fetch(s("/magicButton"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferenceType:this.type})}).then((e=>e.json())).then((e=>this.value=e))},onClear(){this.onFieldUpdate([])}}};const T=(0,d.Z)(I,[["render",b]]);var V=T;function x(e,t,n,r,i,l){const a=(0,o.up)("v-text-field");return(0,o.wg)(),(0,o.j4)(a,{"hide-details":"",label:"Number of days",type:"number",modelValue:i.localValue,"onUpdate:modelValue":t[0]||(t[0]=e=>i.localValue=e),min:1},null,8,["modelValue"])}var j={name:"NumberOfDaysControlled",props:["value"],data(){return{localValue:this.value}},watch:{localValue(e,t){JSON.stringify(e)!==JSON.stringify(t)&&fetch(s("/setPreferences"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({preferenceType:"numberOfDays",preferenceValue:this.localValue})})}}};const D=(0,d.Z)(j,[["render",x]]);var W=D;const z=(0,o._)("h2",null,"Searching",-1);function A(e,t,n,r,i,l){const a=(0,o.up)("v-progress-linear");return(0,o.wg)(),(0,o.iD)("div",null,[z,(0,o._)("h3",null,(0,k.zw)(l.progress)+"% - "+(0,k.zw)(i.done)+"/"+(0,k.zw)(i.total),1),(0,o.Wm)(a,{modelValue:l.progress,"onUpdate:modelValue":t[0]||(t[0]=e=>l.progress=e),color:"primary"},null,8,["modelValue"])])}var N={name:"RequestProgress",emits:["complete"],data(){return{done:0,total:0,progressInterval:setInterval(this.getSearchProgress,3e3)}},computed:{progress(){return Math.round(this.done/this.total*100)}},methods:{startSearch(){fetch(s("/startSearch"),{method:"POST"}).then((e=>e.json())).then((e=>this.total=e.count))},getSearchProgress(){fetch(s("/searchStatus")).then((e=>e.json())).then((e=>{e.finished?(this.$emit("complete",e.results),clearInterval(this.progressInterval)):this.done=e.count}))}},mounted(){this.startSearch()}};const R=(0,d.Z)(N,[["render",A]]);var B=R;const M={class:"d-flex align-center",style:{gap:"32px"}},U={class:"d-flex flex-column align-center",style:{width:"218px"}},Z={class:"d-flex flex-column align-center",style:{width:"156px"}},F={class:"d-flex flex-column align-center flex-grow-1"},J={class:"mb-2"},q=(0,o._)("hr",{class:"w-100"},null,-1),L={class:"mt-2"},$={class:"d-flex flex-column align-center",style:{width:"156px"}},G={class:"d-flex flex-column align-center",style:{width:"218px"}};function H(e,t,n,r,i,l){const a=(0,o.up)("v-card");return(0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.results,(e=>((0,o.wg)(),(0,o.j4)(a,{class:"mb-4 pa-4",key:e.flightNumber,elevation:"4"},{default:(0,o.w5)((()=>[(0,o._)("div",M,[(0,o._)("div",U,[(0,o._)("h2",null,(0,k.zw)(e.date),1),(0,o._)("h1",null,(0,k.zw)(e.flightNumber),1)]),(0,o._)("div",Z,[(0,o._)("h2",null,(0,k.zw)(e.departure),1),(0,o._)("h1",null,(0,k.zw)(e.originCode),1),(0,o._)("p",null,(0,k.zw)(e.originName),1)]),(0,o._)("div",F,[(0,o._)("p",J,(0,k.zw)(e.duration),1),q,(0,o._)("p",L,(0,k.zw)(e.operatedBy),1)]),(0,o._)("div",$,[(0,o._)("h2",null,(0,k.zw)(e.arrival),1),(0,o._)("h1",null,(0,k.zw)(e.destinationCode),1),(0,o._)("p",null,(0,k.zw)(e.destinationName),1)]),(0,o._)("div",G,[(0,o._)("h1",null,(0,k.zw)(e.faresLeft>0?e.price+" "+e.currency:"Sold out"),1),(0,o._)("p",null,(0,k.zw)(e.faresLeft>0?e.faresLeft+" seat(s) left":""),1)])])])),_:2},1024)))),128)}var Y={name:"SearchResults",props:["results"]};const E=(0,d.Z)(Y,[["render",H]]);var K=E,Q={name:"App",components:{AppBar:w,AirportSearchController:V,NumberOfDaysController:W,RequestProgress:B,SearchResults:K},data(){return{airports:void 0,preferences:void 0,searchInProgress:!1,searchResults:[]}},methods:{fetchAirports(){fetch(s("/getAirports")).then((e=>e.json())).then((e=>this.airports=e))},fetchInitialPreferences(){fetch(s("/getPreferences")).then((e=>e.json())).then((e=>this.preferences=e))},onSearch(){this.searchResults=[],this.searchInProgress=!0},onSearchComplete(e){this.searchInProgress=!1,this.searchResults=e}},mounted(){this.fetchAirports(),this.fetchInitialPreferences()}};const X=(0,d.Z)(Q,[["render",a],["__scopeId","data-v-e0835eea"]]);var ee=X,te=(n(9773),n(8957)),ne=n(4091),re=n(8600),oe=n(6064);const ie=(0,te.Rd)({components:ne,directives:re,theme:{themes:{light:{dark:!1,colors:{primary:oe.Z.blue.lighten1}},dark:{dark:!0,colors:{primary:oe.Z.blue.lighten1}}}}});(0,r.ri)(ee).use(ie).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,i){if(!r){var l=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],i=e[u][2];for(var a=!0,s=0;s<r.length;s++)(!1&i||l>=i)&&Object.keys(n.O).every((function(e){return n.O[e](r[s])}))?r.splice(s--,1):(a=!1,i<l&&(l=i));if(a){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,o,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,i,l=r[0],a=r[1],s=r[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(s)var u=s(n)}for(t&&t(r);c<l.length;c++)i=l[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},r=self["webpackChunklfel"]=self["webpackChunklfel"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(1845)}));r=n.O(r)})();
//# sourceMappingURL=app.4f55179e.js.map